<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nosso Mundo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%; overflow: hidden;
            font-family: 'Poppins', sans-serif;
            /* Fundo mágico e profundo */
            background: radial-gradient(circle at 50% 30%, #2b1331, #0f0c29, #000000);
            display: flex; justify-content: center; align-items: center; perspective: 1000px;
        }

        /* Efeito de partículas no fundo (bokeh) */
        body::before {
            content: ''; position: absolute; width: 100%; height: 100%;
            background-image: 
                radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                radial-gradient(rgba(255,255,255,0.05) 2px, transparent 2px);
            background-size: 50px 50px, 100px 100px;
            background-position: 0 0, 25px 25px; opacity: 0.5; z-index: -1;
        }

        /* --- Overlay Inicial --- */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 12, 41, 0.95);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 2000; color: #e0c3fc; text-align: center; transition: opacity 0.8s;
        }
        #overlay h1 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 10px; color: #fff; }
        #start-btn {
            margin-top: 30px; padding: 15px 40px;
            background: linear-gradient(to right, #d4af37, #fceabb); /* Dourado */
            color: #3e2b14; border: none; border-radius: 50px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            transition: transform 0.2s;
        }
        #start-btn:active { transform: scale(0.95); }

        /* --- O Globo --- */
        .globe-container {
            position: relative; width: 340px; height: 450px;
            display: flex; flex-direction: column; align-items: center;
            opacity: 0; transition: opacity 1.5s ease;
            filter: drop-shadow(0 20px 30px rgba(0,0,0,0.6));
        }

        /* A Esfera de Vidro Premium */
        .glass-sphere {
            position: relative; width: 340px; height: 340px; border-radius: 50%;
            /* Camadas de reflexo e brilho */
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.01) 50%, transparent 70%);
            box-shadow: 
                inset 0 0 30px rgba(255,255,255,0.3), /* Brilho interno */
                inset 10px 10px 40px rgba(255, 255, 255, 0.1), /* Reflexo superior */
                0 0 20px rgba(137, 190, 255, 0.2), /* Halo azulado externo */
                0 0 2px rgba(255,255,255,0.5); /* Borda fina brilhante */
            border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden; z-index: 10;
            transform-style: preserve-3d;
        }

        /* Vignette interna */
        .glass-sphere::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.5); 
            border-radius: 50%; pointer-events: none; z-index: 4;
        }

        /* Reflexos Especulares */
        .specular-highlight-1 {
            position: absolute; top: 15%; left: 20%; width: 60px; height: 30px;
            background: rgba(255,255,255,0.7); border-radius: 50%;
            transform: rotate(-35deg); filter: blur(8px); z-index: 20;
        }
        .specular-highlight-2 {
            position: absolute; bottom: 20%; right: 25%; width: 30px; height: 15px;
            background: rgba(255,255,255,0.4); border-radius: 50%;
            transform: rotate(-35deg); filter: blur(5px); z-index: 20;
        }

        /* Carrossel de Fotos */
        .photo-carousel {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
            display: flex; justify-content: center; align-items: center;
        }
        .photo-carousel img {
            position: absolute; width: 115%; height: 115%; object-fit: cover;
            opacity: 0; transition: opacity 1.2s ease-in-out;
            filter: contrast(1.1) brightness(0.9);
        }
        .photo-carousel img.active { opacity: 1; }

        /* Canvas da Neve */
        #snow-canvas { position: absolute; top: 0; left: 0; z-index: 5; pointer-events: none; }

        /* --- A Base Elegante --- */
        .base-structure {
            position: relative; margin-top: -30px; z-index: 5;
            display: flex; flex-direction: column; align-items: center;
        }
        .gold-ring {
            width: 280px; height: 25px;
            background: linear-gradient(to right, #8c6a26, #fceabb, #8c6a26);
            border-radius: 50% / 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.4); z-index: 6;
        }
        .wood-pedestal {
            width: 260px; height: 70px;
            background: linear-gradient(to bottom, #3e2311, #2a1509);
            border-radius: 0 0 40px 40px;
            background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 2px, transparent 2px, transparent 8px);
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.8), 0 15px 30px rgba(0,0,0,0.6);
            position: relative; top: -12px; z-index: 5;
            border-top: 2px solid rgba(0,0,0,0.5);
        }

        /* --- Texto --- */
        .caption-container {
            position: absolute; bottom: -100px; width: 100%;
            text-align: center; color: #fff;
        }
        .caption-container h3 {
            font-family: 'Playfair Display', serif; font-size: 1.5rem; margin: 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8); color: #fceabb;
        }

    </style>
</head>
<body>

    <div id="overlay">
        <h1>Uma lembrança<br>especial.</h1>
        <p>Ative o som e sacuda o celular<br>para a mágica acontecer.</p>
        <button id="start-btn">Revelar Globo</button>
    </div>

    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="globe-container" id="main-container">
        <div class="glass-sphere">
            <div class="specular-highlight-1"></div>
            <div class="specular-highlight-2"></div>
            <canvas id="snow-canvas"></canvas>
            <div class="photo-carousel">
                 <img src="1.jpg" class="active">
                <img src="2.jpeg">
                <img src="3.jpeg">
            </div>
        </div>
        
        <div class="base-structure">
            <div class="gold-ring"></div>
            <div class="wood-pedestal"></div>
        </div>

        <div class="caption-container">
            <h3 id="caption-text">Nossa Jornada...</h3>
        </div>
    </div>

    <script>
        const startBtn = document.getElementById('start-btn');
        const overlay = document.getElementById('overlay');
        const mainContainer = document.getElementById('main-container');
        const music = document.getElementById('bg-music');
        const captionText = document.getElementById('caption-text');
        
        let engine, render, world;

        // --- Configuração da Física (Matter.js) ---
        function initPhysics() {
            const canvas = document.getElementById('snow-canvas');
            const width = 340;
            const height = 340;

            var Engine = Matter.Engine, Render = Matter.Render, World = Matter.World, Bodies = Matter.Bodies, Runner = Matter.Runner;
            engine = Engine.create(); world = engine.world;

            render = Render.create({
                canvas: canvas, engine: engine,
                options: { width: width, height: height, background: 'transparent', wireframes: false }
            });

            const wallThick = 100; // Paredes grossas para a neve não escapar na agitação
            World.add(world, [
                Bodies.rectangle(width/2, height + wallThick/2, width+wallThick*2, wallThick, { isStatic: true }),
                Bodies.rectangle(width/2, -wallThick/2, width+wallThick*2, wallThick, { isStatic: true }),
                Bodies.rectangle(-wallThick/2, height/2, wallThick, height+wallThick*2, { isStatic: true }),
                Bodies.rectangle(width + wallThick/2, height/2, wallThick, height+wallThick*2, { isStatic: true })
            ]);

            // Criar Neve
            for (let i = 0; i < 150; i++) {
                let x = Math.random() * width; let y = Math.random() * height;
                let size = Math.random() * 3 + 1.5; 
                let flake = Bodies.circle(x, y, size, {
                    friction: 0.05, // Pouco atrito para escorregar
                    restitution: 0.5, // Elasticidade (quique)
                    density: 0.001, // Bem leve
                    label: 'snow', // Etiqueta para identificar depois
                    render: { fillStyle: '#ffffff' }
                });
                World.add(world, flake);
            }
            
            Runner.run(Runner.create(), engine);
            Render.run(render);
        }

        // --- Gerenciamento de Sensores (Inclinação e Sacudida) ---
        
        // 1. Inclinação (Gravidade suave)
        function handleOrientation(event) {
            if (!engine) return;
            let gravityX = (event.gamma || 0) / 30; 
            let gravityY = (event.beta || 0) / 30;
            // Limita a gravidade normal
            gravityX = Math.min(Math.max(gravityX, -2), 2); 
            gravityY = Math.min(Math.max(gravityY, -2), 2);
            
            engine.world.gravity.x = gravityX; 
            engine.world.gravity.y = gravityY;
        }

        // 2. Movimento Brusco (Sacudida / Turbulência)
        function handleMotion(event) {
            if (!engine) return;
            
            // Pega a aceleração física (ignorando a gravidade da Terra se possível)
            const acc = event.acceleration;
            if (!acc) return;

            // Calcula a força total do movimento (X, Y e Z)
            // Z é o movimento de "ir e voltar" com a tela (profundidade)
            const strength = Math.sqrt(acc.x**2 + acc.y**2 + acc.z**2);

            // Se a força for maior que um limite (sacudida forte)
            if (strength > 10) { 
                const bodies = Matter.Composite.allBodies(engine.world);
                
                bodies.forEach(body => {
                    // Só aplica força na neve, não nas paredes
                    if (body.label === 'snow') {
                        // Gera uma força aleatória para simular caos/turbulência
                        const forceMagnitude = 0.0005 * strength; // Ajuste de sensibilidade
                        
                        Matter.Body.applyForce(body, body.position, {
                            x: (Math.random() - 0.5) * forceMagnitude,
                            y: (Math.random() - 0.5) * forceMagnitude - (0.0005 * strength) // Tende a jogar pra cima
                        });
                    }
                });
            }
        }

        function requestPermissions() {
            // Tenta pedir permissão para ambos os sensores (necessário no iOS 13+)
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                            window.addEventListener('devicemotion', handleMotion);
                        }
                    })
                    .catch(console.error);
            } else {
                // Android e outros
                window.addEventListener('deviceorientation', handleOrientation);
                window.addEventListener('devicemotion', handleMotion);
            }
        }

        // --- Inicialização ---
        startBtn.addEventListener('click', () => {
            music.volume = 0.6; music.play().catch(e=>{});
            requestPermissions(); 
            initPhysics();
            
            overlay.style.opacity = 0;
            setTimeout(() => { overlay.style.display = 'none'; mainContainer.style.opacity = 1; }, 800);
            
            startCarousel();
        });

        // --- Carrossel e Textos (Edite aqui!) ---
        const images = document.querySelectorAll('.photo-carousel img');
        
        // SUAS FRASES AQUI:
        const captions = [
            "Desde 2018 construindo histórias...",
            "Aquele show inesquecível!",
            "Nossos momentos Player 1 & Player 2.",
            "Ter você na minha vida é o melhor presente. Feliz Natal!"
        ];
        
        let currentIdx = 0;
        function startCarousel() {
            if(captions[currentIdx]) captionText.innerText = captions[currentIdx];
            setInterval(() => {
                images[currentIdx].classList.remove('active');
                currentIdx = (currentIdx + 1) % images.length;
                images[currentIdx].classList.add('active');
                if(captions[currentIdx]) captionText.innerText = captions[currentIdx];
            }, 5000); 
        }
    </script>
</body>
</html>